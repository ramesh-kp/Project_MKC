MODBUS Message Format
---------------------
    * The MODBUS protocol defines the format for the master’s query and the slave’s response.
    * The query contains: 
        the device (or broadcast) address, 
        a function code defining the requested action, 
        any data to be sent, 
        and an error-checking field.
    * The response contains:
        fields confirming the action taken, 
        any data to be returned, 
        and an error-checking field. 
    * If an error occurred in receipt of the message, or if the slave is unable to perform the requested
      action, the slave will construct an error message and send it as its response.

Query
-----
    The example illustrates a request for a single 16-bit Modbus Register.
    
    Slave Address: 
        8-bit value representing the slave being addressed (1 to 247), 0 is reserved for the broadcast address. 
        The SPR and Integra products do not support the broadcast address.
    Function Code:
        8-bit value telling the addressed slave what action is to be performed. 
        (3, 4, or 16 are valid for Integra)
    Start Address (Hi):
        The top (most significant) eight bits of a 16-bit number specifying the start address of the data being requested.
    Start Address (Lo):
        The bottom (least significant) eight bits of a 16-bit number specifying the start address of the data being requested.
    Number of Points (Hi):
        The top (most significant) eight bits of a 16-bit number specifying the number of registers being requested.
    Number of Points (Lo):
        The bottom (least significant) eight bits of a 16-bit number specifying the number of registers being requested.
    Error Check (Lo):
        The bottom (least significant) eight bits of a 16-bit number representing the error check value.
    Error Check (Hi):
        The top (most significant) eight bits of a 16-bit number representing the error check value.

Response
--------
    The example illustrates the normal response to a request for a single 16-bit Register.

    Slave Address:
        8-bit value representing the address of slave, which has just responded.
    Function Code:
        8-bit value which, when a copy of the function code in the query, 
        indicates that the slave recognised the query and has responded. (See also Exception Response).
    Byte Count:
        8-bit value indicating the number of data bytes contained within this response 
    Data (Hi):
        The top (most significant) eight bits of a 16-bit number representing the register(s) requested in the query.
    Data (Lo):
        The bottom (least significant) eight bits of a 16-bit number representing the register(s) requested in the query.
    Error Check (Lo):
        The bottom (least significant) eight bits of a 16-bit number representing the error check value.
    Error Check (Hi):
        The top (most significant) eight bits of a 16-bit number representing the error check value.

Exception Response
------------------
    If an error is detected in the content of the query (excluding parity errors and Error Check mismatch), 
    the function code will be modified to indicate that the response is an error response (called an exception response), 
    and the data bytes will contain a code that describes the error. 
    The exception response is identified by the function code being a copy of the query function code but with the 
    most-significant bit set to logic ‘1’.

    Slave Address: 
        8 bit value representing the address of slave, which has just responded.
    Function Code:
        8 bit value which is the function code in the query OR'ed with Hex (80),
        indicating the slave either does not recognise the query or could not carry out the action requested.
    Error Code:
        8 bit value indicating the nature of the exception detected. 
        (See “Exception Codes“ in the section “Product Information for a list of SPR and Integra supported codes).
    Error Check (Lo):
        The bottom (least significant) eight bits of a 16-bit number representing the error check value.
    Error Check (Hi):
        The top (most significant) eight bits of a 16-bit number representing the error check value.

The Serial Transmission Mode - RTU Mode
----------------------------------------
    In RTU (Remote Terminal Unit) mode, each 8-bit byte in a message contains two 4-bit hexadecimal characters. 
    The main advantage of this mode is that its greater character density allows better data throughput than ASCII for the 
    same baud rate, however each message must be transmitted in a continuous stream.
    The format for each byte in RTU mode is:

    Coding System:
        8-bit binary, hexadecimal 0-9, A-F Two hexadecimal characters contained in each 8-bit field of the message.
    Bits per Byte:
        1 start bit, 
        8 data bits, least significant bit sent first 
        1 parity bit for even/odd parity; no parity bit for no parity
        1 stop bit if parity is used; 2 stop bits if no parity
    Error Check Field:
        Cyclical Redundancy Check (CRC)

    The SPR and Integra products support MODBUS RTU mode. 
    Integra additionally supports a common alternative format with 1 stop bit and no parity.

MODBUS Message Timing (RTU Mode)
--------------------------------
    A MODBUS message has defined beginning and ending points. 
    The receiving devices recognise the start of the message, 
    read the “Slave Address” to determine if they are being addressed and 
    know when the message is completed so that they can use the Error Check bytes to confirm the integrity of the query.
    Partial messages can be detected and discarded.
    In RTU mode, messages start with a silent interval of at least 3.5 character times.
    The first field then transmitted is the device address.
    The allowable characters transmitted for all fields are hexadecimal 0-9, A-F. 
    Devices monitor the network bus continuously, including during the ‘silent’ intervals. 
    When the first field (the address field) is received, each device decodes it to find out if it is the addressed device. 
    If the device determines that it is the one being addressed it decodes the whole message and acts accordingly, 
    if it is not being addressed it continues monitoring for the next message.
    Following the last transmitted character, a silent interval of at least 3.5 character times marks the end of the message. 
    A new message can begin after this interval.
    In the Integra 1000 and 2000, a silent interval of 60msec minimum is required in order to guarantee successful 
    reception of the next request.
    The entire message frame must be transmitted as a continuous stream. 
    If a silent interval of more than 1.5 character times occurs before completion of the frame, 
    the receiving device flushes the incomplete message and assumes that the next byte will be 
    the address field of a new message.
    Similarly, if a new message begins earlier than 3.5 character times following a previous message, 
    the receiving device will consider it a continuation of the previous message. 
    This will result in an error, as the value in the final CRC field will not be valid for the combined messages.
    

